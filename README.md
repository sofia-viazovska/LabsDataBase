# Migration Notes – Prisma ORM  
Лабораторна робота №6  
База даних: PostgreSQL  
ORM: Prisma ORM  
Студент: *[встав своє ім’я]*  

У ході виконання лабораторної роботи було проведено ініціалізацію середовища Prisma, підключення до існуючої бази даних PostgreSQL та створення послідовних міграцій, що модифікують структуру схеми. Спочатку було виконано команду `npx prisma db pull`, що дозволило отримати актуальну модель схеми з існуючої бази даних. На основі отриманої схеми далі було створено низку змін, кожна з яких була оформлена як окрема міграція.

Першою структурною зміною у схемі стала поява нової моделі Review, яка зберігає відгуки користувачів. Ця таблиця містить поля `id`, `rating`, `comment`, `movieId`, а також зв’язок із моделлю `movieshow`. Також у модель `movieshow` було додано відповідне поле `reviews`, що забезпечило двосторонній зв’язок між таблицями. Після внесення змін було виконано команду:


npx prisma migrate dev --name add-review-table

У результаті була створена SQL-міграція у директорії `prisma/migrations/`, яка додає нову таблицю та відповідні зовнішні ключі.

Наступним етапом було внесення зміни до існуючої таблиці `movieshow`, де було додано нове булеве поле `inCinema` зі значенням за замовчуванням `true`. Це поле позначає, чи доступний фільм для показу у кінотеатрах. Після оновлення `schema.prisma` було створено ще одну міграцію командою:


npx prisma migrate dev --name add-inCinema-field

У файлі SQL міграції Prisma автоматично додав нову колонку до відповідної таблиці.

Останнім кроком у роботі стало перейменування поля `genre` у моделі `movieshow` на `category`. Prisma не підтримує пряме перейменування колонки, тому операція була виконана як видалення старого поля і створення нового з іншою назвою. Зміна була зафіксована командою:


npx prisma migrate dev --name rename-genre-to-category

Усі три міграції були успішно застосовані, а їхня історія збережена у директорії `prisma/migrations/`.

Для перевірки коректності виконаних змін було використано Prisma Studio за допомогою команди:


npx prisma studio

Через графічний інтерфейс були додані тестові записи до таблиць movieshow та review. Зв’язки між таблицями відображаються коректно, значення нових полів зберігаються, дані повертаються без помилок.

Таким чином, у ході роботи було виконано всі вимоги лабораторної: проведено ініціалізацію Prisma, виконано зчитування існуючої схеми, додано нову таблицю, змінено існуючу таблицю шляхом додавання нового поля, а також перейменовано поле в моделі. Усі зміни оформлені міграціями, які були застосовані до бази даних та протестовані через Prisma Studio.
